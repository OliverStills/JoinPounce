[build]
builder = "nixpacks"

[[services]]
name = "web"
source = "web"
[services.deploy]
startCommand = "npm start"
healthcheckPath = "/"

[[services]]
name = "api"
source = "api"
[services.deploy]
startCommand = "node dist/index.js"
healthcheckPath = "/health"

[[services]]
name = "price-checker"
source = "worker"
[services.deploy]
startCommand = "node dist/price-check.js"
cronSchedule = "0 9 * * *"

[[services]]
name = "notify-dispatcher"
source = "worker"
[services.deploy]
startCommand = "node dist/notify.js"
cronSchedule = "30 9 * * *"

[[services]]
name = "dead-link-checker"
source = "worker"
[services.deploy]
startCommand = "node dist/dead-links.js"
cronSchedule = "0 3 * * *"
